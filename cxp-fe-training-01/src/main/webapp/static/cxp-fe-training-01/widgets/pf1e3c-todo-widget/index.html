<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:g="http://www.backbase.com/2008/gadget" xml:lang="en">
<head>
    <title>PF1E3C Todo Widget</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <g:preferences>
        <g:preference name="limit" label="Todo's Limit" type="text" default="5" viewHint="none" />
    </g:preferences>

</head>
<body g:onload="requireWidget(__WIDGET__, 'js/pf1e3c-todo-widget')" class="bt-pf1e3c-todo-widget">
    <h1>PF1E3C Todo Widget</h1>

    <form name="add-todo" data-js="bt-pf1e3c-todo-form">
        <input type="text" name="task" placeholder="Enter the task's description here..." />
        <input type="submit" value="add task" />
    </form>

    <div data-js="bt-pf1e3c-todo-list"></div>

    <script type="text/mustache" data-template="bt-pf1e3c-task">
        <ul>
            {{ #tasks }}
            <li id="{{ idx }}" data-taskid="{{ idx }}" data-js="bt-pf1e3c-todo-row" class="{{ #done }}bt-todo-done{{ /done }}">
                <span class="done-check">
                    {{ #done }}
                    <input type="checkbox" data-js="bt-pf1e3c-update-task" data-taskid="{{ idx }}" checked="checked" class="{{ #narrow }}hidden{{ /narrow }}" />
                    {{ /done }}
                    {{ ^done }}
                    <input type="checkbox" data-js="bt-pf1e3c-update-task" data-taskid="{{ idx }}" class="{{ #narrow }}hidden{{ /narrow }}" />
                    {{ /done }}
                </span>
                <span>{{ description }}</span>
                <span><a href="#" data-js="bt-pf1e3c-remove-task" data-taskid="{{ idx }}">remove</a></span>
            </li>
            {{ /tasks }}
        </ul>
    </script>

</body>
</html>
